import * as all from "@mdx-deck/themes";
import { Split, SplitRigh, Image } from "mdx-deck";

import TitlePage from "./Components/Title";

export const themes = [all.aspect43, all.swiss, all.dots];

<TitlePage>

# Treasure 2019

## フロントエンド編

</TitlePage>

---

## はじめに

- 今回紹介する選択肢はあくまでも一例
- 取り上げたものを使わなきゃいけないわけではない

---

## この講義のゴール

- JavaScript でフロントエンド開発出来るようになる
- フロントエンド開発においての引出しを増やす

<Notes>
  *
  フレームワークの選定に関しては、チーム規模だったり、プロダクトのフェーズによって考えることは違う
  * ドキュメントとかモダンなJSでシュッと書けるようにとか
</Notes>

---

## 自己紹介

ここにいい感じの自己紹介

---

import ImgVSCode from "./resources/vscode.png";

## 推奨エディタ

<img
  src={ImgVSCode}
  style={{ objectFit: "contain", maxHeight: "70%", width: "100%" }}
/>

https://code.visualstudio.com

---

<TitlePage>

# フロントエンド入門

</TitlePage>

---

## フロントエンド

Web の文脈でのフロントエンド

- HTML
- CSS
- JavaScript

<Notes>
  CSSも奥が深いので触れた方が良さそうではあるが、今回はJavaScriptでWebアプリケーションを作ることを主眼にしているので、JavaScript中心で進める
  ReactだとMaterial-UIとか、Vue.jsだったらVuetifyを使えばいい感じにMaterial-Designライクになるから、それでひとまずやってみよう
</Notes>

---

## JavaScript

- ブラウザで動作するプログラミング言語
- HTML をよりインタラクティブにするために使われる
- 非同期処理の実現にも使われる

例: gist から非同期でデータを取得し View に表示

https://jsfiddle.net/f3x5a8dy/4/

---

import ImgMDN from "./resources/MDN.png";

## JavaScript で困ったら

<img
  src={ImgMDN}
  style={{ objectFit: "contain", maxHeight: "60%", width: "100%" }}
/>

日本語翻訳もそこそこ進んでいる

https://developer.mozilla.org/ja/

---

<TitlePage>

# 少し前までのフロントエンド

</TitlePage>

---

## フロントエンドの革命児 jQuery

- 2006 年にリリース
- ブラウザ非依存の DOM セレクタ　（`$(query)`）
- 手軽にアニメーションを付けることが可能
- 豊富なプラグイン
- **手軽にクロスブラウザサポートが可能に**

<Notes>
  jQuery使われている例
  https://voyagegroup.com/

アニメーションとかも割と楽に加えられるし、ちょっと動いてくれるだけでいいんだよねみたいな場合に重宝
多彩なプラグインを組み合わせることにより、リッチな UI が簡単に構築できる

https://github.com/styopdev/multiPicker
https://kenwheeler.github.io/slick/

jQuery が優れていると言うよりは、jQuery が使われていた時期が長いから、こういうプラグインが充実したという方が正しいか

</Notes>

---

## ブラウザの進化がもたらしたもの

必須級の jQuery が少しずつ不要に…

- ブラウザ非依存の DOM セレクタ

=> `document.querySelectorAll` のような DOM API

- 手軽にアニメーションを付けることが可能

=> CSS3 の _Transition_ や _Animation_

---

<TitlePage>

# 近年のフロントエンド

</TitlePage>

---

## 開発のスタイルや関心事の変化

- UI/UX の向上が大きな課題に
  - ページスピード、レンダリング速度など
- まだ残り続けるクロスブラウザ対応
- DX を向上させる取り組み

---

## UX を損ねる DOM 操作

- 一般的に重いと言われている DOM 操作
- リストやテーブルを動的に何万件も作った日には……
- DOM 操作をいかに減らしたり効率よく行うかが鍵

---

## ~~UX~~ DX を損ねる DOM 操作

- 一般的に重いと言われている DOM 操作
- リストやテーブルを動的に何万件も作った日には……
- DOM 操作をいかに減らしたり効率よく行うかが鍵**だった**
  - 現代のブラウザ（とマシン）だと割とどうにかなる節もある

<Notes>
  ここでデモかなぁ…ReactとJavaScriptの`appendChild`とかかな
  Reactと同等ぐらいのことをやるなら自前で組み立ててinnerHTMLに投げ込むとか
  Deverloper Toolsの見方とかも覚えてもらえれば
</Notes>

---

## 仮想 DOM

import ImgVirtualDOM from "./resources/virtual_dom.png";

<img
  src={ImgVirtualDOM}
  style={{ objectFit: "contain", maxHeight: "70%", width: "100%" }}
/>

<figcaption style={{ fontSize: "12px" }}>
  https://www.oreilly.com/library/view/learning-react-native/9781491929049/ch02.html
  より引用
</figcaption>

<a href={'https://qiita.com/mizchi/items/4d25bc26def1719d52e6'}>なぜ仮想DOMという概念が俺達の魂を震えさせるのか - Qiita</a>

<Notes>DOMツリーの実装と差分更新アルゴリズムの総称と言うのが正しいのか…</Notes>

---

## 仮想 DOM がもたらしたもの

- DOM 操作を効率よくという DOM 差分計算機に自分がなる必要がない
- 状態と対応する View に集中すればよい
  - サーバーサイドでのテンプレートエンジンのようなイメージ

---

<TitlePage>

## UI framework

</TitlePage>

---

## 事前課題から見る仮想 DOM 採用 UI framework

import ImgReact from "./resources/react-logo.svg";
import ImgVuejs from "./resources/vuejs.png";

<Split style={{ height: 'auto'}}>

  <div style={{'minHeight': '100%'}}>
    <img src={ImgReact} style={{height: '200px'}}/>

    React

  </div>

  <div style={{'minHeight': '100%'}}>
    <img src={ImgVuejs} style={{height: '200px'}}/>

    Vue.js

  </div>

</Split>

---

## みんなの解答（React.js）

https://github.com/VG-Tech-Dojo/treasure2019-pre/pull/75
https://github.com/VG-Tech-Dojo/treasure2019-pre/pull/126
https://github.com/VG-Tech-Dojo/treasure2019-pre/pull/196
https://github.com/VG-Tech-Dojo/treasure2019-pre/pull/210
https://github.com/VG-Tech-Dojo/treasure2019-pre/pull/229
https://github.com/VG-Tech-Dojo/treasure2019-pre/pull/255
https://github.com/VG-Tech-Dojo/treasure2019-pre/pull/292

いい感じに抜粋するぞ

---

## みんなの解答（Vue.js）

https://github.com/VG-Tech-Dojo/treasure2019-pre/pull/101
https://github.com/VG-Tech-Dojo/treasure2019-pre/pull/115
https://github.com/VG-Tech-Dojo/treasure2019-pre/pull/165
https://github.com/VG-Tech-Dojo/treasure2019-pre/pull/200
https://github.com/VG-Tech-Dojo/treasure2019-pre/pull/215
https://github.com/VG-Tech-Dojo/treasure2019-pre/pull/268

いい感じに抜粋するぞ

---

## 調べてみるとまだまだ出てくる

- Vue.js
- AngularJS
- React
- Riot.js
- Elm
- lit-html
- ...

---

## AngularJS

https://corp.fluct.jp/service/publisher/goldspot/

GSM
ここら辺に GSM の説明とか
何ページかやるつもり
こういう開発環境だからーとか
こういうチーム体制だからーとか
こういうニーズが有るからーみたいな

---

## lit-html

神ゲー
ココらへんに神ゲーの説明とか
何ページかやるつもり
こういうニーズが有るからーみたいな
ここは本当にパフォーマンス系のやつがガッツリだからその辺いい感じにアッピル

---

## Vue.js

Zucks

---

## React

HR Tech Studio

---

## いつでも XXX が最適解？

- プロダクト
  - 性質
  - ニーズ
  - フェーズ
- チーム体制

採用する技術は**時と場合**による

---

<TitlePage>

## ビルド

</TitlePage>

---

## why ビルド

- どんどん便利なライブラリ足していきたくなる
- コードの見通しよくするためにモジュールごとに分割したくなる
- script タグの順番をマネージメントするのは現実的に不可能
- ブラウザで扱えない JS もたくさんある

---

## ざっくりビルドのすること

ここに
Babel || Webpack / Parcel

の図を

B => ブラウザ向けに変換
W => 依存解決して固める

---

## Babel

- 次世代の JavaScript をブラウザで動くように変換
  - React で頻出する Rest Parameters は IE11 非対応…
  - https://caniuse.com/
- クロスブラウザ対応にも便利

https://babeljs.io

---

## Webpack

- モジュールやファイルの依存を解決してまとめる
- 難読化や Minify も行える
- プラグイン豊富で何でも出来る、出来てしまう

https://webpack.js.org

---

## Parcel

**驚くほど速く、設定不要な Web アプリケーションバンドラー**

- 変換、依存解決、バンドルまで全部やる
- Config を書かせない => 複雑なことをさせない
  - Webpack と真逆の立ち位置
  - Webpack と比べると出来ないことも出てくる

https://parceljs.org

---

## フレームワーク  と密な便利（創味のつゆ）CLI

React: create-react-app

- https://github.com/facebook/create-react-app

Vue.js: Vue CLI

- https://cli.vuejs.org

<div style={{ position: 'absolute', top: '80%' }}>

<p style={{ 'fontSize': 'smaller'}}>創味のつゆの出典: <a href={'https://speakerdeck.com/takeru0757/simple-is-not-easy'}>https://speakerdeck.com/takeru0757/simple-is-not-easy</a></p>

</div>

---

#### メリット

- 対象のフレームワークで使うだろこれっていうのがいい感じに入る
- 容易に Hello World 出来る
- 動くものをまず提供するということに注力できる

#### デメリット（？）

- Webpack / Parcel と同じような構図
  - ビルドをこだわりたくなったらきつい
- CLI が勝手に入れたこのライブラリ、必要？の判断

便利さを求めると何かしらのトレードオフは発生する

<Notes>
  事前課題でも core-js入ってたけど、なんでだっけ？みたいのがあった（実際polyfillのためなんだろうけど）
  じゃあcore-jsをラップしてるBabel使ってる時点で今言ってることおかしくね感は…

https://jp.vuejs.org/2018/08/11/vue-cli-3-0-is-here/
Vue CLI 3.0 からイジェクトしなくても webpack いじれるようになったね

create-react-app なら eject すればいいけど…
最初のインストールを省きたいならありか…

</Notes>

---
<!-- 
<TitlePage>

## テスト

</TitlePage>

---

import ImgTWada from "./resources/twada.png";

<Image src={ImgTWada} style={{ backgroundSize: "contain" }} />

---

**昨日のことを思い出そう**

---
-->

<TitlePage>

# オマケ

</TitlePage>

---

- Debug
  - Chrome Deverloper Tools とかでいいかな
- Lint
  - Prettier で脳死で良くない？Lint 戦争で喧嘩したくないでしょ
- CSS framework
  - React なら Material-UI、Vue なら Vuetify みたいのがあるよ
- TypeScript
  - やりたい人はやってみよう
- jsconfig.json
  - https://code.visualstudio.com/docs/languages/javascript
- @types は JS でも有効
  - 外部ライブラリ使う時は本当に便利だから TypeScript じゃなくても活用してみよう
- JSX?
  - Vue でもサポートし始めてるし、こういう選択肢もあるかもね

---

<TitlePage>

## n 分で理解する React 入門

</TitlePage>

---

## 2 つの種類の Component

- Statefull Component (Class)
- Stateless Component (Function)

---

## state と props

- state => コンポーネント自身が管理している自身の状態
- props => 親コンポーネントから渡される**不変**なパラメータ

---

## Stateless のうまみ

- 渡されたデータを元に View を作ることに専念出来る
- 依存するのは親からの props

シンプル

---

### Stateless も状態を持ち始めた

Hooks

お好きな方を

---

### Component に状態をなるべく閉じる

外部から渡される、外部に渡したい状態以外は閉じた状態にする

手っ取り早いのが Stateless Component 使うこと

Redux を使うという手も
